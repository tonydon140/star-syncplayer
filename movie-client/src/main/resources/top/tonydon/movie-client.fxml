<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.media.MediaView?>
<?import javafx.scene.text.Font?>
<AnchorPane fx:id="root"
            stylesheets="@movie-client.css"
            xmlns="http://javafx.com/javafx/18"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="top.tonydon.ClientController">

    <VBox spacing="5">
        <!--  菜单栏 -->
        <MenuBar>
            <Menu text="帮助">
                <MenuItem text="检查更新" onAction="#checkUpdate"/>
                <MenuItem text="关于" onAction="#about"/>
            </Menu>
        </MenuBar>

        <HBox>
            <!-- 主界面 -->
            <AnchorPane prefHeight="600" prefWidth="980">
                <AnchorPane prefHeight="540" prefWidth="960">
                    <MediaView fx:id="mediaView" fitHeight="540" fitWidth="960"/>
                </AnchorPane>


                <VBox fx:id="controllerBox" prefWidth="960" style="-fx-background-color: #f4f4f4"
                      AnchorPane.bottomAnchor="0">
                    <padding>
                        <Insets bottom="10" top="5"/>
                    </padding>

                    <Slider fx:id="videoSlider" disable="true" prefHeight="14.0" prefWidth="960.0"/>

                    <HBox>
                        <HBox fx:id="leftCB" alignment="CENTER_LEFT" prefWidth="288" spacing="15">
                            <!-- 选择视频按钮 -->
                            <Button onAction="#selectVideo" text="选择视频">
                                <HBox.margin>
                                    <Insets left="20"/>
                                </HBox.margin>
                            </Button>
                            <!-- 时间组件 -->
                            <Label fx:id="videoDurationLabel" text="0:00/0:00">
                                <font>
                                    <Font size="15"/>
                                </font>
                            </Label>

                        </HBox>

                        <HBox fx:id="rightCB" alignment="CENTER_RIGHT" prefWidth="672" spacing="15">
                            <!-- 弹幕输入框 -->
                            <TextField fx:id="bsTextField" disable="true" onAction="#sendBulletScreen" prefWidth="200"
                                       promptText="发送弹幕~"/>
                            <!-- 播放/暂停按钮 -->
                            <AnchorPane fx:id="playOrPausePane" disable="true" onMouseClicked="#playOrPause"
                                        opacity="0.5">
                                <cursor>
                                    <Cursor fx:constant="HAND"/>
                                </cursor>
                                <ImageView fx:id="playOrPauseImageView"/>
                            </AnchorPane>

                            <!-- 声音组件 -->
                            <ImageView>
                                <Image url="@icon/声音开.png"/>
                            </ImageView>
                            <Slider fx:id="volumeSlider" max="1" value="0.8"/>
                            <Label fx:id="volumeLabel" alignment="CENTER_RIGHT" prefWidth="40">
                                80%
                                <font>
                                    <Font size="15"/>
                                </font>
                            </Label>

                            <Spinner fx:id="rateSpinner" amountToStepBy="0.05" disable="true" editable="true"
                                     initialValue="1" max="2.5" min="0.5" prefWidth="80">
                                <styleClass>
                                    <Spinner fx:constant="STYLE_CLASS_SPLIT_ARROWS_HORIZONTAL"/>
                                </styleClass>
                            </Spinner>

                            <!-- 全屏按钮 -->
                            <AnchorPane onMouseClicked="#fullScreen">
                                <HBox.margin>
                                    <Insets right="20"/>
                                </HBox.margin>
                                <cursor>
                                    <Cursor fx:constant="HAND"/>
                                </cursor>
                                <ImageView>
                                    <Image url="@icon/全屏.png"/>
                                </ImageView>
                            </AnchorPane>
                        </HBox>
                    </HBox>
                </VBox>
            </AnchorPane>

            <!--        Spinner -->
            <AnchorPane layoutX="980" prefWidth="160">
                <VBox spacing="10">
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Button fx:id="connectServerButton" onAction="#connectServer">连接服务器</Button>
                        <ProgressIndicator fx:id="connectProgress" prefHeight="20" prefWidth="20" visible="false"/>
                    </HBox>

                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Button fx:id="copyNumberButton" disable="true" onAction="#copyNumber">复制星星号</Button>
                        <Label fx:id="selfNumberLabel"/>
                    </HBox>

                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Button fx:id="bindButton" disable="true" onAction="#bindButtonAction">绑定他/她</Button>
                        <Label fx:id="targetNumberLabel"/>
                    </HBox>

                    <VBox fx:id="togetherVBox" disable="true" spacing="15">
                        <Button onAction="#togetherPlay">一起播放
                            <tooltip>
                                <Tooltip>
                                    <text>双方同时播放视频，但不同步进度和倍速</text>
                                </Tooltip>
                            </tooltip>
                        </Button>
                        <Button onAction="#togetherPause">一起暂停</Button>
                        <Button onAction="#togetherStop">从头开始</Button>
                        <Button onAction="#synchronization">
                            同步播放
                            <tooltip>
                                <Tooltip>
                                    <text>同步当前进度和倍速，并播放视频</text>
                                </Tooltip>
                            </tooltip>
                        </Button>
                        <!--                    <Button onAction="#test">测试</Button>-->
                    </VBox>
                </VBox>
            </AnchorPane>
        </HBox>
    </VBox>

</AnchorPane>
